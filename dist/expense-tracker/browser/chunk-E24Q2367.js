import{Kb as m,Lb as b,M as u,Q as h,a as o,b as p,m as n,q as c,x as a}from"./chunk-2AP6R54K.js";var d={production:!1,API_URL:"https://expense-tracker-backend-rashed-hpd9dub2bpb9fddb.uksouth-01.azurewebsites.net"};var r=d.API_URL,g=class l{constructor(t){this.http=t}LS_KEY="transactions";register(t){return this.http.post(`${r}/auth/register`,t)}login(t){return this.http.post(`${r}/auth/login`,t)}getTransactions(){return this.http.get(`${r}/transactions`).pipe(c(t=>t.transactions||[]),a(()=>n(this.getAllLocal())))}addTransaction(t){return this.http.post(`${r}/transactions`,t).pipe(a(()=>n(this.createLocal(t))))}updateTransaction(t,e){return this.http.put(`${r}/transactions/${t}`,e).pipe(a(()=>n(this.updateLocal(t,e))))}deleteTransaction(t){return this.http.delete(`${r}/transactions/${t}`).pipe(a(()=>(this.deleteLocal(t),n({deleted:!0}))))}getMonthlySummary(){return this.http.get(`${r}/summary`)}getBudget(){return this.http.get(`${r}/budget`)}upsertBudget(t,e=90){return this.http.put(`${r}/budget`,{limit:t,threshold:e})}exportTransactionsCsv(t){let e=new m;return t&&(e=e.set("type",t)),this.http.get(`${r}/transactions/export/csv`,{responseType:"blob",params:e})}getAllLocal(){try{return JSON.parse(localStorage.getItem(this.LS_KEY)||"[]")}catch{return[]}}setAllLocal(t){localStorage.setItem(this.LS_KEY,JSON.stringify(t))}createLocal(t){let e=this.getAllLocal(),s=p(o({},t),{id:crypto.randomUUID?crypto.randomUUID():String(Date.now())});return e.push(s),this.setAllLocal(e),s}updateLocal(t,e){let s=this.getAllLocal(),i=s.findIndex(x=>x.id===t);return i>=0?(s[i]=o(o({},s[i]),e),this.setAllLocal(s),s[i]):null}deleteLocal(t){this.setAllLocal(this.getAllLocal().filter(e=>e.id!==t))}static \u0275fac=function(e){return new(e||l)(h(b))};static \u0275prov=u({token:l,factory:l.\u0275fac,providedIn:"root"})};export{g as a};
