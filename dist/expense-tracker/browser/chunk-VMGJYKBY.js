import{c as v}from"./chunk-2PDLQISM.js";import{a as B}from"./chunk-J6B3EUYM.js";import{$b as L,Eb as w,Na as h,Oa as e,Ob as T,Pa as n,Pb as x,Qa as m,Qb as E,Rb as P,Sb as V,Ta as _,Tb as N,Ua as S,Ub as A,Vb as O,Wb as W,X as a,Xb as F,Y as l,Za as b,Zb as q,_a as i,_b as D,ac as R,cb as s,db as p,eb as c,pa as d,ta as y,za as M}from"./chunk-2AP6R54K.js";var I=class C{constructor(f,g){this.api=f;this.router=g}model={type:"expense",amount:0,category:"Food",date:new Date().toISOString().slice(0,10),note:""};saving=!1;error="";saveTransaction(){if(!this.model.type||!this.model.category?.trim()||!this.model.date||!this.model.note?.trim()||this.model.amount===null||isNaN(Number(this.model.amount))||Number(this.model.amount)<=0){alert("Please fill in all fields with valid values.");return}this.saving=!0,this.error="",this.api.addTransaction({type:this.model.type,category:this.model.category,amount:Number(this.model.amount),date:this.model.date,note:this.model.note.trim()}).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/transactions"])},error:f=>{this.saving=!1,this.error=f?.error?.error||"Failed to save transaction",alert(this.error)}})}static \u0275fac=function(g){return new(g||C)(y(B),y(v))};static \u0275cmp=M({type:C,selectors:[["app-add-transaction"]],decls:42,vars:6,consts:[["txForm","ngForm"],["novalidate","",3,"ngSubmit"],["for","type"],["id","type","name","type","required","",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","income"],["value","expense"],["for","amount"],["id","amount","type","number","name","amount","required","","min","0.01","step","0.01","inputmode","decimal","autocomplete","off",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value","Food"],["value","Rent"],["value","Transport"],["value","Entertainment"],["for","date"],["id","date","type","date","name","date","required","",3,"ngModelChange","ngModel"],["for","note"],["id","note","type","text","name","note","required","","maxlength","80","autocomplete","off",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"]],template:function(g,o){if(g&1){let r=_();e(0,"h2"),i(1,"Add a New Transaction"),n(),e(2,"form",1,0),S("ngSubmit",function(){return a(r),l(o.saveTransaction())}),e(4,"label",2),i(5,"Type:"),n(),e(6,"select",3),c("ngModelChange",function(t){return a(r),p(o.model.type,t)||(o.model.type=t),l(t)}),e(7,"option",4),i(8,"-- Select type --"),n(),e(9,"option",5),i(10,"Income"),n(),e(11,"option",6),i(12,"Expense"),n()(),m(13,"br"),e(14,"label",7),i(15,"Amount:"),n(),e(16,"input",8),c("ngModelChange",function(t){return a(r),p(o.model.amount,t)||(o.model.amount=t),l(t)}),n(),m(17,"br"),e(18,"label",9),i(19,"Category:"),n(),e(20,"select",10),c("ngModelChange",function(t){return a(r),p(o.model.category,t)||(o.model.category=t),l(t)}),e(21,"option",4),i(22,"-- Select a category --"),n(),e(23,"option",11),i(24,"Food"),n(),e(25,"option",12),i(26,"Rent"),n(),e(27,"option",13),i(28,"Transport"),n(),e(29,"option",14),i(30,"Entertainment"),n()(),m(31,"br"),e(32,"label",15),i(33,"Date:"),n(),e(34,"input",16),c("ngModelChange",function(t){return a(r),p(o.model.date,t)||(o.model.date=t),l(t)}),n(),m(35,"br"),e(36,"label",17),i(37,"Note:"),n(),e(38,"input",18),c("ngModelChange",function(t){return a(r),p(o.model.note,t)||(o.model.note=t),l(t)}),n(),m(39,"br"),e(40,"button",19),i(41,"Save"),n()()}if(g&2){let r=b(3);d(6),s("ngModel",o.model.type),d(10),s("ngModel",o.model.amount),d(4),s("ngModel",o.model.category),d(14),s("ngModel",o.model.date),d(4),s("ngModel",o.model.note),d(2),h("disabled",!r.form.valid)}},dependencies:[w,R,N,W,F,T,A,O,x,E,D,L,q,V,P],styles:["form[_ngcontent-%COMP%]{max-width:400px;margin:30px auto;display:flex;flex-direction:column;gap:15px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:3px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px;font-size:1rem;border:1px solid #ccc;border-radius:4px}form[_ngcontent-%COMP%]   #type[_ngcontent-%COMP%]{background-color:#f0f8ff;font-weight:700}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;background-color:#ffc107;border:none;border-radius:5px;cursor:pointer;font-weight:700;font-size:1rem;transition:background-color .2s ease-in-out}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0a800}"]})};export{I as AddTransactionComponent};
