import{a as b}from"./chunk-TAIADCAT.js";import{c as M}from"./chunk-2PDLQISM.js";import{a as I}from"./chunk-J6B3EUYM.js";import{Eb as v,Na as S,Oa as o,Ob as L,Pa as n,Pb as V,Qb as P,Rb as N,Sb as A,Ta as C,Tb as E,Ua as u,X as a,Y as s,_a as d,_b as W,ab as y,ac as F,cb as c,db as w,eb as f,pa as m,ta as p,za as _}from"./chunk-2AP6R54K.js";var T=class h{constructor(i,r,e){this.router=i;this.api=r;this.auth=e}email="";password="";showPassword=!1;loading=!1;togglePassword(){this.showPassword=!this.showPassword}login(){if(!this.email||!this.password){alert("Enter email & password");return}this.loading=!0,this.api.login({email:this.email,password:this.password}).subscribe({next:i=>{this.auth.loginSuccess(i.access_token,i.email||this.email),this.router.navigate(["/dashboard"])},error:i=>alert(i?.error?.error||"Login failed"),complete:()=>this.loading=!1})}static \u0275fac=function(r){return new(r||h)(p(M),p(I),p(b))};static \u0275cmp=_({type:h,selectors:[["app-login"]],decls:11,vars:4,consts:[["loginForm","ngForm"],[3,"ngSubmit"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],[2,"position","relative","display","flex","align-items","center"],["name","password","placeholder","Password","required","",3,"ngModelChange","ngModel","type"],["type","button",2,"margin-left","8px",3,"click"],["type","submit"]],template:function(r,e){if(r&1){let l=C();o(0,"h2"),d(1,"Login"),n(),o(2,"form",1,0),u("ngSubmit",function(){return a(l),s(e.login())}),o(4,"input",2),f("ngModelChange",function(t){return a(l),w(e.email,t)||(e.email=t),s(t)}),n(),o(5,"div",3)(6,"input",4),f("ngModelChange",function(t){return a(l),w(e.password,t)||(e.password=t),s(t)}),n(),o(7,"button",5),u("click",function(){return a(l),s(e.togglePassword())}),d(8),n()(),o(9,"button",6),d(10,"Login"),n()()}r&2&&(m(4),c("ngModel",e.email),m(2),c("ngModel",e.password),S("type",e.showPassword?"text":"password"),m(2),y(" ",e.showPassword?"Hide":"Show"," "))},dependencies:[F,E,L,V,P,W,A,N,v],encapsulation:2})};export{T as LoginComponent};
