"use strict";(self.webpackChunkexpense_tracker=self.webpackChunkexpense_tracker||[]).push([[205],{205:(M,m,o)=>{o.r(m),o.d(m,{LoginComponent:()=>E});var d=o(2200),a=o(4341),p=o(980),r=o(2615),e=o(3664),u=o(7277),h=o(3366),c=o(4796);let E=(()=>{class g{router;api;auth;email="";password="";showPassword=!1;loading=!1;constructor(i,s,n){this.router=i,this.api=s,this.auth=n}togglePassword(){this.showPassword=!this.showPassword}login(){const i=this.email.trim(),s=this.password;i&&s?(this.loading=!0,this.api.login({email:i,password:s}).pipe((0,p.j)(()=>this.loading=!1)).subscribe({next:n=>{const t=n.access_token??n.token??"";t?(this.auth.loginSuccess(t,n.email??i),this.router.navigateByUrl("/dashboard")):alert(n.message??"Login failed")},error:n=>{alert(n?.error?.message??n?.error?.error??"Login failed")}})):alert("Enter email & password")}static \u0275fac=function(s){return new(s||g)(e.rXU(u.Ix),e.rXU(h.G),e.rXU(c.u))};static \u0275cmp=e.VBU({type:g,selectors:[["app-login"]],decls:11,vars:4,consts:[["loginForm","ngForm"],[3,"ngSubmit"],["type","email","name","email","placeholder","Email","required","",3,"ngModelChange","ngModel"],[2,"position","relative","display","flex","align-items","center"],["name","password","placeholder","Password","required","",3,"ngModelChange","ngModel","type"],["type","button",2,"margin-left","8px",3,"click"],["type","submit"]],template:function(s,n){if(1&s){const t=e.RV6();e.j41(0,"h2"),e.EFF(1,"Login"),e.k0s(),e.j41(2,"form",1,0),e.bIt("ngSubmit",function(){return r.eBV(t),r.Njj(n.login())}),e.j41(4,"input",2),e.mxI("ngModelChange",function(l){return r.eBV(t),e.DH7(n.email,l)||(n.email=l),r.Njj(l)}),e.k0s(),e.j41(5,"div",3)(6,"input",4),e.mxI("ngModelChange",function(l){return r.eBV(t),e.DH7(n.password,l)||(n.password=l),r.Njj(l)}),e.k0s(),e.j41(7,"button",5),e.bIt("click",function(){return r.eBV(t),r.Njj(n.togglePassword())}),e.EFF(8),e.k0s()(),e.j41(9,"button",6),e.EFF(10,"Login"),e.k0s()()}2&s&&(e.R7$(4),e.R50("ngModel",n.email),e.R7$(2),e.R50("ngModel",n.password),e.Y8G("type",n.showPassword?"text":"password"),e.R7$(2),e.SpI(" ",n.showPassword?"Hide":"Show"," "))},dependencies:[d.MD,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV],encapsulation:2})}return g})()}}]);